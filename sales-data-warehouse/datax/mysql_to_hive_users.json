{
    "job": {
        "setting": {
            "speed": {
                "channel": 3
            },
            "errorLimit": {
                "record": 0,
                "percentage": 0.02
            }
        },
        "content": [
            {
                "reader": {
                    "name": "mysqlreader",
                    "parameter": {
                        "username": "root",
                        "password": "123456",
                        "column": [
                            "user_id",
                            "username",
                            "email",
                            "phone",
                            "password",
                            "nickname",
                            "avatar_url",
                            "status",
                            "is_verified",
                            "role",
                            "created_at",
                            "updated_at",
                            "last_login",
                            "account_balance",
                            "points_balance",
                            "membership_level",
                            "failed_attempts",
                            "lock_until",
                            "two_factor_enabled",
                            "preferred_language",
                            "preferred_currency",
                            "shipping_address",
                            "billing_address",
                            "newsletter_subscribed",
                            "referral_code",
                            "referred_by_user_id",
                            "cart_id",
                            "order_count",
                            "order_total"
                        ],
                        "splitPk": "user_id",
                        "connection": [
                            {
                                "jdbcUrl": ["jdbc:mysql://localhost:3306/yewu_erp?useUnicode=true&characterEncoding=utf8"],
                                "table": ["users"]
                            }
                        ],
                        "where": "updated_at >= '${yesterday}' OR created_at >= '${yesterday}'"
                    }
                },
                "writer": {
                    "name": "hdfswriter",
                    "parameter": {
                        "defaultFS": "hdfs://hadoop-master:9000",
                        "fileType": "text",
                        "path": "/user/hive/warehouse/purchase_sales_ods.db/ods_users/dt=${today}",
                        "fileName": "users",
                        "column": [
                            {
                                "name": "user_id",
                                "type": "int"
                            },
                            {
                                "name": "username",
                                "type": "string"
                            },
                            {
                                "name": "email",
                                "type": "string"
                            },
                            {
                                "name": "phone",
                                "type": "string"
                            },
                            {
                                "name": "password",
                                "type": "string"
                            },
                            {
                                "name": "nickname",
                                "type": "string"
                            },
                            {
                                "name": "avatar_url",
                                "type": "string"
                            },
                            {
                                "name": "status",
                                "type": "string"
                            },
                            {
                                "name": "is_verified",
                                "type": "boolean"
                            },
                            {
                                "name": "role",
                                "type": "string"
                            },
                            {
                                "name": "created_at",
                                "type": "timestamp"
                            },
                            {
                                "name": "updated_at",
                                "type": "timestamp"
                            },
                            {
                                "name": "last_login",
                                "type": "timestamp"
                            },
                            {
                                "name": "account_balance",
                                "type": "double"
                            },
                            {
                                "name": "points_balance",
                                "type": "int"
                            },
                            {
                                "name": "membership_level",
                                "type": "string"
                            },
                            {
                                "name": "failed_attempts",
                                "type": "int"
                            },
                            {
                                "name": "lock_until",
                                "type": "timestamp"
                            },
                            {
                                "name": "two_factor_enabled",
                                "type": "boolean"
                            },
                            {
                                "name": "preferred_language",
                                "type": "string"
                            },
                            {
                                "name": "preferred_currency",
                                "type": "string"
                            },
                            {
                                "name": "shipping_address",
                                "type": "string"
                            },
                            {
                                "name": "billing_address",
                                "type": "string"
                            },
                            {
                                "name": "newsletter_subscribed",
                                "type": "boolean"
                            },
                            {
                                "name": "referral_code",
                                "type": "string"
                            },
                            {
                                "name": "referred_by_user_id",
                                "type": "int"
                            },
                            {
                                "name": "cart_id",
                                "type": "int"
                            },
                            {
                                "name": "order_count",
                                "type": "int"
                            },
                            {
                                "name": "order_total",
                                "type": "double"
                            },
                            {
                                "name": "etl_time",
                                "type": "timestamp"
                            }
                        ],
                        "writeMode": "append",
                        "fieldDelimiter": "\001",
                        "compress": "gzip"
                    }
                }
            }
        ]
    }
} 