# 数据生成模块

## 概述

数据生成模块用于创建模拟的购销数据，为整个数据仓库系统提供测试数据源。该模块使用Python和Faker库生成符合业务场景的模拟数据，并将其存储到MySQL数据库中，作为数据仓库ETL过程的数据源。

## 功能特点

- 生成模拟的用户、产品、订单、销售和库存数据
- 支持大规模数据生成，可配置生成数量和时间范围
- 保证数据的一致性和合理性，符合真实业务场景
- 支持自定义数据分布和业务规则
- 支持活动数据生成和效果模拟
- 支持季节性因素和节假日影响
- 支持多维度数据生成（用户、产品、订单、库存、活动等）

## 文件说明

- `fakeData.py` - 主要的数据生成脚本
- `requirements.txt` - Python依赖项列表
- `config/data_config.py` - 数据生成配置参数
- `config.yaml` - 系统配置文件

## 环境要求

- Python 3.7+
- MySQL 5.7+
- 相关Python库（见requirements.txt）

## 安装步骤

1. 安装Python依赖：

```bash
pip install -r requirements.txt
```

2. 配置数据库连接：

修改`config/db_config.py`文件中的数据库连接信息：

```python
DB_CONFIG = {
    'host': 'localhost',
    'user': 'your_username',
    'password': 'your_password',
    'database': 'sales_db',
    'port': 3306
}
```

## 使用方法

### 基本用法

生成默认数量的模拟数据：

```bash
python fakeData.py
```

### 自定义数据量

指定要生成的数据量：

```bash
python fakeData.py --users 1000 --products 500 --orders 5000
```

### 参数说明

- `--users` - 生成的用户数量（默认：1000）
- `--products` - 生成的产品数量（默认：200）
- `--orders` - 生成的订单数量（默认：10000）
- `--start_date` - 数据开始日期（默认：一年前）
- `--end_date` - 数据结束日期（默认：当前日期）
- `--clear` - 在生成新数据前清除现有数据（默认：False）

## 数据模型

### 维度表

1. **时间维度表(dim_date)**
   - 日期、年份、季度、月份、星期等
   - 节假日标记
   - 工作日标记

2. **地区维度表(dim_location)**
   - 国家、省份、城市、区县等
   - 地理坐标信息

3. **产品维度表(dim_product)**
   - 产品基本信息
   - 产品类别和子类别
   - 价格和成本信息

4. **客户维度表(dim_customer)**
   - 客户基本信息
   - 客户类型和等级
   - 注册信息

5. **员工维度表(dim_employee)**
   - 员工基本信息
   - 部门和职位信息

6. **活动维度表(dim_activity)**
   - 活动基本信息
   - 活动类型和状态
   - 活动效果指标

### 事实表

1. **订单事实表(orders)**
   - 订单基本信息
   - 订单状态和金额
   - 关联维度键

2. **销售事实表(sales)**
   - 销售记录
   - 数量和金额信息
   - 关联维度键

3. **库存事实表(inventory)**
   - 库存水平
   - 补货信息
   - 关联维度键

4. **活动事实表(activity_sales)**
   - 活动销售记录
   - 活动效果数据
   - 关联维度键

## 数据分布

数据生成过程模拟了真实的业务场景，包括：

- 产品销售的季节性波动
- 不同区域的销售差异
- 热门产品和冷门产品的销售分布
- 用户购买行为的多样性
- 活动效果的影响
- 节假日销售特征
- 库存周转率差异

## 数据验证

系统内置了完整的数据验证机制，包括：

- 订单状态分布验证
- 库存周转率验证
- 用户购买频率验证
- 活动效果验证
- 数据一致性检查

## 配置说明

### 基础配置

在`config/data_config.py`中可以配置：

1. **产品相关配置**
   - 产品类别分布
   - 价格范围
   - 库存周转率

2. **用户相关配置**
   - 用户类型分布
   - 年龄分布
   - 地区分布

3. **订单相关配置**
   - 订单状态分布
   - 订单数量范围
   - 支付方式分布

4. **活动相关配置**
   - 活动类型
   - 活动时间
   - 活动效果参数

### 高级配置

在`config.yaml`中可以配置：

1. **数据库配置**
   - 连接参数
   - 连接池设置
   - 批处理大小

2. **性能配置**
   - 数据生成批次
   - 提交间隔
   - 并发设置

3. **日志配置**
   - 日志级别
   - 日志格式
   - 日志轮转

## 注意事项

- 大规模数据生成可能需要较长时间，请耐心等待
- 确保MySQL数据库有足够的存储空间
- 对于大量数据，建议增加数据库的连接超时设置
- 建议在生成数据前备份数据库
- 数据验证失败时会自动停止生成过程
- 可以通过调整配置文件来优化生成性能 